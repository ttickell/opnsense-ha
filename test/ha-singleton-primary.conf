#!/bin/sh#!/bin/sh

# OPNsense HA Singleton Configuration File - Primary Firewall Configuration# OPNsense HA Singleton Configuration File - Primary Firewall Configuration

# # Primary Firewall LAN: 192.168.51.2, Secondary Firewall LAN: 192.168.51.3

# Network Topology:

# WAN: 192.168.50.0/24 (DHCP), fd03:17ac:e938:16::/64# WAN Interfaces to manage (space-delimited) - Single WAN setup

# LAN: 192.168.51.0/24, fd03:17ac:e938:1f00::/64  WAN_INTS="vtnet0_vlan110"

# Primary LAN: 192.168.51.2, fd03:17ac:e938:1f00::2

# Secondary LAN: 192.168.51.3, fd03:17ac:e938:1f00::3# Services to manage based on CARP status

# CARP VIP: 192.168.51.1, fd03:17ac:e938:1f00::1SERVICES="rtsold dhcp6c radvd"

# PFSYNC: 192.168.103.0/29

# Alternate default routes (when this primary firewall becomes BACKUP)

# WAN Interfaces to manage (space-delimited)# When this firewall is BACKUP, route through the SECONDARY firewall's LAN IP

WAN_INTS="vtnet0_vlan110"ALT_DEFROUTE_IPV4="192.168.51.3"     # Secondary firewall's LAN IP (when we're backup)

ALT_DEFROUTE_IPV6=""                  # IPv6 TBD - will configure separately

# Services to manage based on CARP status

SERVICES="rtsold dhcp6c radvd"# Feature toggles

ENABLE_IPV6="no"                      # Disable IPv6 for now - IPv4 testing first

# Alternate default routes (when this primary firewall becomes BACKUP)ENABLE_SERVICE_MANAGEMENT="yes"       # Enable service start/stop

# When this firewall is BACKUP, route through the SECONDARY firewall's LAN IPENABLE_ROUTE_MANAGEMENT="yes"         # Enable backup route management

ALT_DEFROUTE_IPV4="192.168.51.3"                    # Secondary firewall's LAN IPDEBUG="yes"                          # Enable debug logging for testing

ALT_DEFROUTE_IPV6="fd03:17ac:e938:1f00::3"           # Secondary firewall's IPv6 LAN IP

# IPv6 Integration settings (disabled for now)

# Feature togglesIPV6_SCRIPT_PATH="/usr/local/bin"    # Path to IPv6 management scripts

ENABLE_IPV6="yes"                    # Enable IPv6 management (test environment ready)SYNC_IPV6_STATE="no"                 # Disable IPv6 sync for now

ENABLE_SERVICE_MANAGEMENT="yes"      # Enable service start/stop

ENABLE_ROUTE_MANAGEMENT="yes"        # Enable backup route management# Advanced settings

DEBUG="yes"                         # Enable debug logging for testingINTERFACE_SETTLE_TIME="2"            # Seconds to wait after interface changes

SERVICE_STARTUP_DELAY="1"            # Seconds between service starts

# IPv6 Integration settingsHEALTH_CHECK_ENABLED="yes"           # Enable health checking
IPV6_SCRIPT_PATH="/usr/local/bin"    # Path to IPv6 management scripts
SYNC_IPV6_STATE="yes"               # Sync IPv6 state between nodes (when integrated)

# Advanced settings
INTERFACE_SETTLE_TIME="2"           # Seconds to wait after interface changes
SERVICE_STARTUP_DELAY="1"           # Seconds between service starts
HEALTH_CHECK_ENABLED="yes"          # Enable health checking